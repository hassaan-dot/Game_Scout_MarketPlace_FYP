{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useMutation } from \"@tanstack/react-query\";\nimport { toast } from \"react-toastify\";\nimport { api } from \"../services/axios\";\nimport LocalStorage from \"../services/local-storage\";\nimport { useAuthStore } from \"../store/useAuthStore\";\nimport { useModalStore } from \"../store/useModalStore\";\nconst handleLogin = async data => {\n  const res = await api.post(\"/login\", data);\n  return res.data;\n};\nconst handleSignUp = async data => {\n  const res = await api.post(\"/register\", data);\n  return res.data;\n};\nexport const useSignup = () => {\n  _s();\n  const {\n    setIsRegister\n  } = useModalStore();\n  const notify = message => toast(message);\n  return useMutation({\n    mutationKey: [\"SignUp\"],\n    mutationFn: data => handleSignUp(data),\n    onSuccess: async data => {\n      notify(\"Signup Successful\");\n      setIsRegister(false);\n    },\n    onError: error => {\n      var _error$response, _error$response$data;\n      notify((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Signup failed\");\n    }\n  });\n};\n_s(useSignup, \"qOuliPwRStEgQLUmO4S7CEWB4A4=\", false, function () {\n  return [useModalStore, useMutation];\n});\nexport const useLogin = () => {\n  _s2();\n  const {\n    setUser,\n    setToken\n  } = useAuthStore();\n  const notify = message => toast(message);\n  return useMutation({\n    mutationKey: [\"login\"],\n    mutationFn: data => handleLogin(data),\n    onSuccess: async data => {\n      notify();\n      setToken(data === null || data === void 0 ? void 0 : data.token);\n      setUser(data === null || data === void 0 ? void 0 : data._id);\n      LocalStorage.save(\"token\", data === null || data === void 0 ? void 0 : data.token);\n      LocalStorage.save(\"user\", data === null || data === void 0 ? void 0 : data._id);\n    },\n    onError: error => {\n      var _error$response2, _error$response2$data;\n      notify(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message);\n    }\n  });\n};\n_s2(useLogin, \"zkl+LDUDb1pcYee9FJFwpEHQfh8=\", false, function () {\n  return [useAuthStore, useMutation];\n});","map":{"version":3,"names":["useMutation","toast","api","LocalStorage","useAuthStore","useModalStore","handleLogin","data","res","post","handleSignUp","useSignup","_s","setIsRegister","notify","message","mutationKey","mutationFn","onSuccess","onError","error","_error$response","_error$response$data","response","useLogin","_s2","setUser","setToken","token","_id","save","_error$response2","_error$response2$data"],"sources":["D:/New folder/Game_Scout_MarketPlace_FYP/src/hooks/useLogin.js"],"sourcesContent":["import { useMutation } from \"@tanstack/react-query\";\r\nimport { toast } from \"react-toastify\";\r\nimport { api } from \"../services/axios\";\r\nimport LocalStorage from \"../services/local-storage\";\r\nimport { useAuthStore } from \"../store/useAuthStore\";\r\nimport { useModalStore } from \"../store/useModalStore\";\r\n\r\nconst handleLogin = async (data) => {\r\n  const res = await api.post(\"/login\", data);\r\n  return res.data;\r\n};\r\n\r\nconst handleSignUp = async (data) => {\r\n  const res = await api.post(\"/register\", data);\r\n  return res.data;\r\n};\r\n\r\nexport const useSignup = () => {\r\n  const { setIsRegister } = useModalStore();\r\n  const notify = (message) => toast(message);\r\n  return useMutation({\r\n    mutationKey: [\"SignUp\"],\r\n    mutationFn: (data) => handleSignUp(data),\r\n    onSuccess: async (data) => {\r\n      notify(\"Signup Successful\");\r\n      setIsRegister(false);\r\n    },\r\n    onError: (error) => {\r\n      notify(error?.response?.data?.message || \"Signup failed\");\r\n    },\r\n  });\r\n};\r\n\r\nexport const useLogin = () => {\r\n  const { setUser, setToken } = useAuthStore();\r\n  const notify = (message) => toast(message);\r\n  return useMutation({\r\n    mutationKey: [\"login\"],\r\n    mutationFn: (data) => handleLogin(data),\r\n    onSuccess: async (data) => {\r\n      notify();\r\n      setToken(data?.token);\r\n      setUser(data?._id);\r\n      LocalStorage.save(\"token\", data?.token);\r\n      LocalStorage.save(\"user\", data?._id);\r\n    },\r\n    onError: (error) => {\r\n      notify(error?.response?.data?.message);\r\n    },\r\n  });\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}